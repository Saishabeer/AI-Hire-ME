/* Dark theme for entire app - overrides Tailwind to unify look across pages */
:root {
  --bg-0: #0b1220;
  --bg-1: #0f172a;
  --bg-2: #111827;
  --bg-3: #1f2937;
  --text-0: #e5e7eb;
  --text-1: #cbd5e1;
  --text-2: #9ca3af;
  --brand: #7c3aed;
  --brand-2: #4f46e5;
  --accent: #22c55e;
  --danger: #ef4444;
  --warning: #f59e0b;
  --border: #374151;
  --focus: #60a5fa;
  --link: #93c5fd;
}

body.theme-dark {
  background: var(--bg-0);
  color: var(--text-0);
}

/* Tailwind class overrides for dark look */
body.theme-dark .bg-white {
  background-color: var(--bg-2) !important;
  color: var(--text-0) !important;
  border-color: var(--border) !important;
}
body.theme-dark .bg-gray-50 { background-color: var(--bg-1) !important; }
body.theme-dark .bg-gray-100 { background-color: var(--bg-1) !important; }
body.theme-dark .text-gray-900 { color: var(--text-0) !important; }
body.theme-dark .text-gray-800 { color: var(--text-0) !important; }
body.theme-dark .text-gray-700 { color: var(--text-1) !important; }
body.theme-dark .text-gray-600 { color: var(--text-2) !important; }
body.theme-dark .text-gray-500 { color: #94a3b8 !important; }
body.theme-dark .border-gray-200 { border-color: var(--border) !important; }
body.theme-dark .border-gray-300 { border-color: var(--border) !important; }

/* Dark-mode overrides for common Tailwind utility backgrounds used in templates */
body.theme-dark .bg-gray-200,
body.theme-dark .bg-gray-300 { background-color: var(--bg-3) !important; color: var(--text-0) !important; }

body.theme-dark .bg-red-50,
body.theme-dark .bg-red-100 { background-color: #3b0d0d !important; color: #fecaca !important; }

body.theme-dark .bg-green-50,
body.theme-dark .bg-green-100 { background-color: #052e1f !important; color: #a7f3d0 !important; }

body.theme-dark .bg-blue-50,
body.theme-dark .bg-blue-100 { background-color: #0b2b4a !important; color: #bfdbfe !important; }

body.theme-dark .bg-purple-50,
body.theme-dark .bg-purple-100 { background-color: #2e1065 !important; color: #c4b5fd !important; }

/* Tone down light borders to dark neutral */
body.theme-dark .border-purple-200,
body.theme-dark .border-green-200,
body.theme-dark .border-red-200,
body.theme-dark .border-blue-200 { border-color: var(--border) !important; }

/* Badge-like text colors on dark */
body.theme-dark .text-purple-600 { color: #c4b5fd !important; }
body.theme-dark .text-green-800,
body.theme-dark .text-green-700 { color: #86efac !important; }
body.theme-dark .text-red-800,
body.theme-dark .text-red-700 { color: #fecaca !important; }

/* Containers */
.container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.card {
  background: var(--bg-1);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 24px;
}

/* Navbar helpers */
.navbar { background: var(--bg-0); border-bottom: 1px solid var(--border); }
.nav a { color: var(--text-1); text-decoration: none; }
.nav a:hover { color: #fff; }

/* Forms */
input[type="text"],
input[type="email"],
input[type="password"],
textarea,
select {
  background: var(--bg-3);
  color: var(--text-0);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 10px 12px;
  width: 100%;
}
textarea { resize: vertical; min-height: 100px; }
input::placeholder, textarea::placeholder { color: var(--text-2); }
input:focus, textarea:focus, select:focus {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
  border-color: var(--focus);
  background: var(--bg-3);
}

label { color: var(--text-1); font-weight: 600; }

/* Typography */
h1, h2, h3, h4 { color: var(--text-0); }
p { color: var(--text-1); }
small, .text-xs { color: var(--text-2); }
code { background: var(--bg-3); color: var(--text-0); padding: 2px 6px; border-radius: 6px; }

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-weight: 600;
  border-radius: 8px;
  padding: 10px 14px;
  border: 1px solid transparent;
  cursor: pointer;
  text-decoration: none;
}
.btn-primary { background: linear-gradient(90deg, var(--brand), var(--brand-2)); color: #fff; }
.btn-primary:hover { filter: brightness(1.05); }
.btn-secondary { background: var(--bg-3); color: var(--text-0); border-color: var(--border); }
.btn-secondary:hover { background: #273244; }
.btn-success { background: #16a34a; color: #fff; }
.btn-danger { background: var(--danger); color: #fff; }
.btn-warning { background: var(--warning); color: #111827; }
.btn-outline { background: transparent; color: var(--text-0); border-color: var(--border); }
.btn-outline:hover { background: var(--bg-3); }
.btn, .btn:hover { text-decoration: none; }

.btn-row { display: flex; gap: 12px; flex-wrap: wrap; }

button:disabled { opacity: 0.6; cursor: not-allowed; }

/* Badges */
.badge { font-size: 12px; padding: 3px 6px; border-radius: 4px; }
.badge-green { background:#064e3b; color:#86efac; }
.badge-purple { background:#2e1065; color:#c4b5fd; }

/* Question editor tweaks */
.question-card .question-text {
  background: transparent;
  color: var(--text-0);
  border-bottom: 2px solid transparent;
}
.question-card .question-text:hover { border-color: var(--border); }
.question-card .question-text:focus { border-color: var(--focus); }

.question-card .option-text {
  background: transparent;
  color: var(--text-0);
  border-bottom: 1px solid var(--border);
}
.question-card .option-text:focus { border-color: var(--focus); }

/* Section title input tweaks */
.section-card .section-title {
  background: transparent;
  color: var(--text-0);
  border: 1px solid var(--border);
  border-radius: 8px;
}
.section-card .section-title::placeholder {
  color: var(--text-2);
  opacity: 0.75;
}
.section-card .section-title:focus {
  border-color: var(--focus);
  outline: 2px solid var(--focus);
  outline-offset: 2px;
  background: var(--bg-3);
}

/* Messages (Django messages) */
.messages { margin-top: 16px; }
.alert { border-left: 4px solid; padding: 12px; border-radius: 6px; margin-bottom: 10px; }
.alert-success { background:#052e1f; border-color:#22c55e; color:#a7f3d0; }
.alert-error { background:#3b0d0d; border-color:#ef4444; color:#fecaca; }
.alert-info { background:#0b2b4a; border-color:#60a5fa; color:#bfdbfe; }
.alert-warning { background:#3b2a0d; border-color:#f59e0b; color:#fde68a; }

/* Override gradient header tint to darker palette */
body.theme-dark .bg-gradient-to-r.from-purple-600.to-blue-600.text-white {
  background: linear-gradient(90deg, #4c1d95, #1e3a8a) !important;
  color: #fff !important;
}
/* Neutralize light gradients that may appear on cards in dark mode */
body.theme-dark .bg-gradient-to-br {
  background: var(--bg-2) !important;
}

/* Links */
a, .link { color: var(--link); }
a:hover { text-decoration: underline; }

/* Tables & lists (basic) */
table { width: 100%; border-collapse: collapse; }
th, td { border-bottom: 1px solid var(--border); padding: 10px 12px; }
th { text-align: left; color: var(--text-1); }

/* Utility grids */
.grid { display: grid; gap: 16px; }
.grid-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
.full-width { width: 100%; }

/* Footer spacing helper */
.page { padding-bottom: 48px; }

/* Input group layout */
.field { margin-bottom: 14px; }
.help { font-size: 12px; color: var(--text-2); margin-top: 4px; }
.errors { color: #fecaca; font-size: 13px; margin-top: 6px; }

/* Toggle chips etc */
.toggle { display: inline-flex; align-items: center; gap: 8px; color: var(--text-1); }
/* Reset and polish: ensure dark theme consistently overrides Tailwind visuals */
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; }

body.theme-dark a { color: var(--link); }
body.theme-dark a:hover { text-decoration: underline; }

/* Buttons that should remain light-on-dark regardless of link defaults */
.btn-primary, .btn-success, .btn-danger { color: #fff !important; }

/* Neutralize Tailwind ring/glow shadows that can create bright halos */
body.theme-dark input,
body.theme-dark textarea,
body.theme-dark select,
body.theme-dark .btn {
  box-shadow: none !important;
}

/* Keep focus visible but clean (rely on outline from earlier rules) */
body.theme-dark input:focus,
body.theme-dark textarea:focus,
body.theme-dark select:focus {
  box-shadow: none !important;
}

/* General gradient fix: if Tailwind gradient is used, ensure it’s dark-friendly */
body.theme-dark .bg-gradient-to-r {
  background: linear-gradient(90deg, #4c1d95, #1e3a8a) !important;
  color: #fff !important;
}

/* Ensure container spacing looks consistent site-wide */
.container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }

/* Subtle separators */
hr, .divider { border: 0; border-top: 1px solid var(--border); }
/* --- Live Interview UI (tabs/stepper, chat, pills) --- */
.stepper {
  display: flex;
  gap: 16px;
  align-items: center;
  overflow-x: auto;
  padding: 8px;
}
.step-item {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  border: 1px solid var(--border);
  background: var(--bg-2);
  border-radius: 9999px;
  transition: all .15s ease;
}
.step-item .dot {
  width: 14px; height: 14px; border-radius: 9999px;
  background: var(--bg-3);
  border: 2px solid var(--border);
}
.step-item .label { color: var(--text-1); font-weight: 600; }
.step-item .count { color: var(--text-2); }
.step-item.active {
  border-color: var(--focus);
  box-shadow: 0 0 0 2px rgba(96,165,250,.2);
}
.step-item.active .label { color: #fff; }
.step-item.active .dot { background: var(--brand); border-color: var(--brand); }
.step-item.done { border-color: var(--accent); }
.step-item.done .dot { background: var(--accent); border-color: var(--accent); }
.step-item.done .label { color: #a7f3d0; }

/* Chat transcript */
.chat-box {
  background: var(--bg-2);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  max-height: 420px;
  overflow-y: auto;
}
#transcript-list { display: grid; gap: 12px; }
.bubble {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
  background: var(--bg-3);
  color: var(--text-0);
  max-width: 70%;
  line-height: 1.55;
  font-size: 14px;
  box-shadow: 0 1px 0 rgba(0,0,0,.15);
  /* Make long texts neat and wrap cleanly */
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  word-break: break-word;
  hyphens: auto;
}
/* Left-pane Q/A bubbles (kept) */
.bubble-q { border-left: 4px solid var(--brand); }
.bubble-a { border-left: 4px solid var(--accent); background: rgba(22,163,74,0.08); }
/* Transcript bubbles (right pane) */
.bubble-ai { border-color: var(--brand); background: rgba(124,58,237,.08); }
.bubble-user { border-color: var(--accent); background: rgba(22,163,74,.10); }
.align-left { justify-self: start; margin-right: auto; }
.align-right { justify-self: end; margin-left: auto; }

/* Collected info (left) */
#collected-info .section-block + .section-block { margin-top: 18px; }
#collected-info .qa { display: grid; gap: 8px; }
#collected-info .qa .bubble-q { background: var(--bg-2); }
#collected-info .qa .answer:empty::before {
  content: 'Waiting for answer…';
  color: var(--text-2);
  font-style: italic;
}
#collected-info .qa.active {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
  border-radius: 10px;
}

/* Status pill */
.pill {
  display: inline-flex;
  align-items: center;
  border-radius: 9999px;
  padding: 6px 10px;
  font-weight: 600;
  border: 1px solid transparent;
}
.pill-green { background: #064e3b; color: #86efac; border-color: #065f46; }
.pill-yellow { background: #3b2a0d; color: #fde68a; border-color: #b45309; }
.pill-red { background: #3b0d0d; color: #fecaca; border-color: #b91c1c; }

/* Panel minimums */
#collected-card, #voice-card { min-height: 420px; }

/* Responsive: stack on small screens */
@media (max-width: 900px) {
  .grid-2 { grid-template-columns: 1fr; }
}

/* Subtle themed scrollbars */
body.theme-dark ::-webkit-scrollbar { width: 10px; height: 10px; }
body.theme-dark ::-webkit-scrollbar-thumb { background: var(--bg-3); border-radius: 8px; border: 2px solid var(--bg-1); }
body.theme-dark ::-webkit-scrollbar-track { background: var(--bg-1); }